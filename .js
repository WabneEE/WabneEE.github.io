import{readdirSync,readFileSync,writeFileSync}from"fs";import{minify as minifyHtml}from"html-minifier-terser";import{minify as minifyJs}from"terser";async function minifyFile(i){try{const e=i.split(".").pop().toLowerCase(),n=readFileSync(i,"utf-8");if("js"===e){const e=await minifyJs(n,{ecma:2020,compress:!0,mangle:!0,output:{comments:!1,ascii_only:!1}});e.code&&writeFileSync(i,e.code),console.log(`Minified JS: ${i}`)}else if("html"===e||"css"===e){const o=await minifyHtml(n,{collapseWhitespace:!0,conservativeCollapse:!0,removeComments:!0,minifyJS:!0,minifyCSS:!0,keepClosingSlash:!0});writeFileSync(i,o),console.log(`Minified ${e.toUpperCase()}: ${i}`)}else console.log(`Skipped (unsupported): ${i}`)}catch(e){console.error(`Error minifying ${i}:`,e.message)}}async function main(){const i=readdirSync(".").filter((i=>/\.(js|html|css)$/i.test(i)));for(const e of i)await minifyFile(e)}main();